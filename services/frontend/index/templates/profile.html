{% load crispy_forms_tags %}
<page-element name="profile">
	{% include 'navbar.html' with authenticated="true" %}
	<title>Profile</title>
	<div class="container mt-5">
		<div class="form-group row" align="center">	
			<h1 class="mb-4">My Profile</h1>
		</div>
	</div>
	 <div class="container" id="userprofile">
		<div class="main-body">
		  <div class="row gutters-sm">
			<div class="col-md-4 mb-3">
			  <div class="card">
				<div class="card-body">
				  <div class="d-flex flex-column align-items-center text-center">
					<img id="profile-pic" alt="Admin">
					<div class="mt-3">
						<h4 id="username">{{ request.user.username }}</h4>
						<p class="text-muted font-size-sm" id="city"></p>
						<hr>
						<!-- File input hidden -->
						<input id="file-input" type="file" accept="image/*" style="display: none;">
						<!-- Change photo button -->
						<button id="change-photo-button" class="btn btn-primary">Change Photo</button>
					</div>
				  </div>
				</div>
				  </div>
				</div>
				<div class="col-md-8">
				  <div class="card mb-3">
					<div class="card-body" id="profile-view">
					  <div class="row mb-3">
						<div class="col-sm-3">
						  <h6 class="mb-0">Username</h6>
						</div>
						<div class="col-sm-9 text-secondary" id="profile-username">
						</div>
					  </div>
					  <hr>
					  <div class="row mb-3">
						<div class="col-sm-3">
						  <h6 class="mb-0">Full Name</h6>
						</div>
						<div class="col-sm-9 text-secondary" id="fullname">
						</div>
					  </div>
					  <hr>
					  <div class="row mb-3">
						<div class="col-sm-3">
						  <h6 class="mb-0">Email</h6>
						</div>
						<div class="col-sm-9 text-secondary" id="email">
						</div>
					  </div>
					  <hr>
					  <div class="row mb-3">
						<div class="col-sm-3">
						  <h6 class="mb-0">Bio</h6>
						</div>
						<div class="col-sm-9 text-secondary" id="bio">
						</div>
					  </div>
					  <hr>
					  <div class="row mb-3">
						<div class="col-sm-3">
						  <h6 class="mb-0">City</h6>
						</div>
						<div class="col-sm-9 text-secondary" id="city">
						</div>
					  </div>
					  <hr>
					  <div class="row mb-3">
						<div class="col-sm-3">
						  <h6 class="mb-0">Birth Date</h6>
						</div>
						<div class="col-sm-9 text-secondary" id="birth-date">
						</div>
					  </div>
					  <hr>
					  <div class="row mb-3">
						<div class="col-sm-3">
						  <h6 class="mb-0">Password</h6>
						</div>
						<div class="col-sm-9 text-secondary">
						  ***********
						</div>
					  </div>
					  <hr>
					  <div class="row mb-3">
						<div class="col-sm-1">
						  <a class="btn btn-info " onclick="editProfile()">Edit</a>
						</div>
						<div class="col-sm-3">
						  <a class="btn btn-danger " >Delete</a>
						</div>
					  </div>
					</div>
					<!-- Profile Edit Section (hidden initially) -->
					<form method="POST" id="form-profile" class="d-inline">
						{% csrf_token %}
					<div class="card-body" id="profile-edit" style="display: none;">
					  <div class="row mb-3">
						<div class="col-sm-3">
						  <h6 class="mb-0">Username</h6>
						</div>
						<div class="col-sm-9 text-secondary">
						  <input name="username" class="form-control" placeholder="{{ request.user.username }}" id="username-edit">
						</div>
					  </div>
					  <hr><div class="row mb-3">
						<div class="col-sm-3">
						  <h6 class="mb-0">Full Name</h6>
						</div>
						<div class="col-sm-9 text-secondary">
						  <input name="name" class="form-control" placeholder="{{ request.user.name }}">
						</div>
					  </div>
					  <hr>
					  <div class="row mb-3">
						<div class="col-sm-3">
						  <h6 class="mb-0">Email</h6>
						</div>
						<div class="col-sm-9 text-secondary">
						  <input type="email" id="id-email" name="email" class="form-control" placeholder="{{ request.user.email }}">
						</div>
					  </div>
					  <hr>
					  <div class="row mb-3">
						<div class="col-sm-3">
						  <h6 class="mb-0">Bio</h6>
						</div>
						<div class="col-sm-9 text-secondary">
						  <input name="bio" class="form-control" placeholder="{{ request.user.bio }}">
						
						</div>
					  </div>
					  <hr>
					  <div class="row mb-3">
						<div class="col-sm-3">
						  <h6 class="mb-0">City</h6>
						</div>
						<div class="col-sm-9 text-secondary">
						  <input name="city" class="form-control" placeholder="{{ request.user.city }}">
						</div>
					  </div>
					  <hr>
					  <div class="row mb-3">
						<div class="col-sm-3">
						  <h6 class="mb-0">Birth Date</h6>
						</div>
						<div class="col-sm-9 text-secondary" id="birth-date-view">
						  <input name="birth_date" type="date" id="id-date"  class="form-control" placeholder="{{ request.user.birth_date }}">
						</div>
					  </div>
					  <hr>
					  <div class="row mb-3">
						<div class="col-sm-3">
						  <h6 class="mb-0">Password</h6>
						</div>
						<div class="col-sm-9 text-secondary">
						  <input name="password" type="password" id="id-password"  class="form-control">
						</div>
					  </div>
					  <hr>
					  <div class="row mb-3">
						<div class="col-sm-12">
						  <button type="submit" class="btn btn-success hidden" id="saveChangesButton">Save Changes</button>
						</div>
					  </div>
					</div>
					</form>
				  </div>
				</div>
			  </div>
			</div>
		  </div>
</page-element>
